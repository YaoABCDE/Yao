import{u as U,h as te,k as le,l as z,m as oe,P as ae,t as se,p as re,q as S,v as B,x as ne,w as M,y as l,z as ie,R as P,A as ue,B as ce,C as pe,D as ve,E as de,F as he,i as me,G as ge,H as ye,I as _e,J as Ee,K as T,L as $,M as fe,N as x,O as be}from"./app-BpYmYVbC.js";const Ae=["/","/about/","/about/me.html","/about/website.html","/about/guestbook.html","/developer/","/en/","/en/intro.html","/favorite/","/leetcode/","/posts/catalog.html","/posts/book_list.html","/posts/ot-doc_ready.html","/posts/","/tips/","/tips/xiaojiqiao.html","/tools/","/tools/uTools.html","/tutorial/proxy_wall_ready.html","/tutorial/wsl_ready.html","/tutorial/wsl_proxy.html","/tutorial/ssh_jump.html","/tutorial/","/developer/basic/computer_and_os.html","/developer/basic/open_source.html","/developer/basic/dev_env_ready.html","/developer/basic/coding_market.html","/developer/basic/file_and_path.html","/developer/basic/file_utf8.html","/developer/basic/cmd_shell.html","/developer/basic/apt_homebrew.html","/developer/basic/git_github.html","/developer/basic/vscode.html","/developer/basic/search_engine.html","/developer/basic/proxy_to_net.html","/developer/basic/","/developer/front_end_web/nodejs_ready.html","/developer/front_end_web/fnm_ready.html","/developer/front_end_web/web_develop_ready.html","/developer/front_end_web/","/developer/front_end_web/es6_modules.html","/developer/front_end_web/npm.html","/developer/front_end_web/pm2.html","/developer/front_end_web/url_parse.html","/developer/golang/golang_install.html","/developer/golang/go_mongo.html","/developer/golang/","/developer/golang/shell-format.html","/developer/golang/vscode_golang.html","/developer/golang/golang_viewpoint.html","/developer/golang/golang_shell.html","/developer/golang/golang_command.html","/developer/golang/golang_lib.html","/developer/golang/golang_book.html","/developer/linux/","/developer/linux/nginx_ready.html","/developer/linux/wsl%E5%AE%89%E8%A3%85%E6%A1%8C%E9%9D%A2.html","/en/demo/","/en/demo/disable.html","/en/demo/encrypt.html","/en/demo/page.html","/en/posts/cherry.html","/en/posts/dragonfruit.html","/en/posts/strawberry.html","/en/posts/tomato.html","/favorite/essays/","/favorite/essays/elonmusk_saying.html","/favorite/essays/not_internet_developer.html","/favorite/links/","/favorite/links/document.html","/favorite/links/friend.html","/favorite/links/tools.html","/favorite/movies/","/favorite/movies/ForrestGump.html","/favorite/music/","/favorite/music/music163_favorite.html","/favorite/photos/bing_img_api.html","/favorite/photos/","/leetcode/threeSum.html","/leetcode/twoSum.html","/leetcode/groupAnagrams.html","/leetcode/trap.html","/leetcode/longestConsecutive.html","/leetcode/maxArea.html","/leetcode/moveZeroes.html","/tools/git/git_ready.html","/tools/git/git_proxy.html","/tools/git/git_command.html","/tools/git/git_client.html","/tools/git/git_flow.html","/tools/git/","/tools/vscode/vscode_ready.html","/tools/vscode/vscode_common_plug.html","/tools/vscode/vscode_web_front_vue.html","/tools/vscode/vscode_golang.html","/tools/vscode/vscode_remote.html","/tools/vscode/vscode_Draw.html","/tools/vscode/vscode_nginx.html","/tools/vscode/","/tutorial/vuepress-hope/step_ready.html","/tutorial/vuepress-hope/img-preview.html","/tutorial/vuepress-hope/step_config.html","/tutorial/vuepress-hope/step_components.html","/tutorial/vuepress-hope/step_client.html","/tutorial/vuepress-hope/step_md_components.html","/tutorial/vuepress-hope/klipse.html","/tutorial/vuepress-hope/step_talk.html","/tutorial/vuepress-hope/step_icon_nav.html","/tutorial/vuepress-hope/step_deploy.html","/tutorial/vuepress-hope/","/developer/golang/go-zero/","/developer/linux/debian/","/developer/linux/debian/ready.html","/developer/linux/debian/install_mongo.html","/developer/linux/settings/","/developer/linux/settings/curl_cert.html","/en/posts/apple/1.html","/en/posts/apple/2.html","/en/posts/apple/3.html","/en/posts/apple/4.html","/en/posts/banana/1.html","/en/posts/banana/2.html","/en/posts/banana/3.html","/en/posts/banana/4.html","/404.html","/en/posts/","/en/posts/apple/","/en/posts/banana/","/category/","/category/developer/","/category/leetcode/","/category/%E5%8D%9A%E6%96%87/","/category/%E6%95%99%E7%A8%8B/","/category/%E6%8A%80%E5%B7%A7/","/category/%E5%B7%A5%E5%85%B7/","/category/%E5%9F%BA%E7%A1%80/","/category/%E5%89%8D%E7%AB%AF/","/category/golang/","/category/linux/","/category/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%95%99%E7%A8%8B/","/category/go/","/en/category/","/en/category/guide/","/en/category/cherry/","/en/category/dragon-fruit/","/en/category/fruit/","/en/category/strawberry/","/en/category/vegetable/","/en/category/apple/","/en/category/banana/","/tag/","/tag/%E7%9B%AE%E5%BD%95/","/tag/%E4%B9%A6%E5%8D%95/","/tag/ottertrade/","/tag/%E6%BC%94%E7%A4%BA/","/tag/utools/","/tag/%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/","/tag/%E4%BB%A3%E7%90%86/","/tag/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/","/tag/%E6%8A%80%E5%B7%A7/","/tag/%E6%95%99%E7%A8%8B/","/tag/%E5%B7%A5%E5%85%B7/","/tag/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/","/tag/%E5%BA%93/","/tag/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/","/tag/nginx/","/tag/leetcode/","/tag/git/","/tag/vscode/","/tag/go-zero/","/tag/debian/","/tag/%E6%95%B0%E6%8D%AE%E5%BA%93/","/tag/mongo/","/tag/setting/","/en/tag/","/en/tag/disable/","/en/tag/encryption/","/en/tag/page-config/","/en/tag/guide/","/en/tag/red/","/en/tag/small/","/en/tag/round/","/en/tag/big/","/en/tag/yellow/","/en/tag/curly/","/en/tag/long/","/article/","/en/article/","/star/","/en/star/","/timeline/","/en/timeline/"],we="SEARCH_PRO_QUERY_HISTORY",y=U(we,[]),Be=()=>{const{queryHistoryCount:o}=x,a=o>0;return{enabled:a,queryHistory:y,addQueryHistory:s=>{a&&(y.value=Array.from(new Set([s,...y.value.slice(0,o-1)])))},removeQueryHistory:s=>{y.value=[...y.value.slice(0,s),...y.value.slice(s+1)]}}},F=o=>Ae[o.id]+("anchor"in o?`#${o.anchor}`:""),xe="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:I}=x,_=U(xe,[]),ke=()=>{const o=I>0;return{enabled:o,resultHistory:_,addResultHistory:a=>{if(o){const s={link:F(a),display:a.display};"header"in a&&(s.header=a.header),_.value=[s,..._.value.slice(0,I-1)]}},removeResultHistory:a=>{_.value=[..._.value.slice(0,a),..._.value.slice(a+1)]}}},De=o=>{const a=ve(),s=z(),k=de(),n=S(0),b=B(()=>n.value>0),h=he([]);return me(()=>{const{search:m,terminate:D}=ge(),E=fe(c=>{const f=c.join(" "),{searchFilter:H=d=>d,splitWord:R,suggestionsFilter:L,...g}=a.value;f?(n.value+=1,m(c.join(" "),s.value,g).then(d=>H(d,f,s.value,k.value)).then(d=>{n.value-=1,h.value=d}).catch(d=>{console.warn(d),n.value-=1,n.value||(h.value=[])})):h.value=[]},x.searchDelay-x.suggestDelay);M([o,s],([c])=>E(c),{immediate:!0}),ye(()=>{D()})}),{isSearching:b,results:h}};var Re=te({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(o,{emit:a}){const s=le(),k=z(),n=oe(ae),{enabled:b,addQueryHistory:h,queryHistory:m,removeQueryHistory:D}=Be(),{enabled:E,resultHistory:c,addResultHistory:f,removeResultHistory:H}=ke(),R=b||E,L=se(o,"queries"),{results:g,isSearching:d}=De(L),r=re({isQuery:!0,index:0}),p=S(0),v=S(0),j=B(()=>R&&(m.value.length>0||c.value.length>0)),C=B(()=>g.value.length>0),Q=B(()=>g.value[p.value]||null),Y=()=>{const{isQuery:e,index:t}=r;t===0?(r.isQuery=!e,r.index=e?c.value.length-1:m.value.length-1):r.index=t-1},G=()=>{const{isQuery:e,index:t}=r;t===(e?m.value.length-1:c.value.length-1)?(r.isQuery=!e,r.index=0):r.index=t+1},J=()=>{p.value=p.value>0?p.value-1:g.value.length-1,v.value=Q.value.contents.length-1},K=()=>{p.value=p.value<g.value.length-1?p.value+1:0,v.value=0},N=()=>{v.value<Q.value.contents.length-1?v.value+=1:K()},V=()=>{v.value>0?v.value-=1:J()},q=e=>e.map(t=>be(t)?t:l(t[0],t[1])),Z=e=>{if(e.type==="customField"){const t=_e[e.index]||"$content",[i,w=""]=Ee(t)?t[k.value].split("$content"):t.split("$content");return e.display.map(u=>l("div",q([i,...u,w])))}return e.display.map(t=>l("div",q(t)))},A=()=>{p.value=0,v.value=0,a("updateQuery",""),a("close")},W=()=>b?l("ul",{class:"search-pro-result-list"},l("li",{class:"search-pro-result-list-item"},[l("div",{class:"search-pro-result-title"},n.value.queryHistory),m.value.map((e,t)=>l("div",{class:["search-pro-result-item",{active:r.isQuery&&r.index===t}],onClick:()=>{a("updateQuery",e)}},[l(T,{class:"search-pro-result-type"}),l("div",{class:"search-pro-result-content"},e),l("button",{class:"search-pro-remove-icon",innerHTML:$,onClick:i=>{i.preventDefault(),i.stopPropagation(),D(t)}})]))])):null,X=()=>E?l("ul",{class:"search-pro-result-list"},l("li",{class:"search-pro-result-list-item"},[l("div",{class:"search-pro-result-title"},n.value.resultHistory),c.value.map((e,t)=>l(P,{to:e.link,class:["search-pro-result-item",{active:!r.isQuery&&r.index===t}],onClick:()=>{A()}},()=>[l(T,{class:"search-pro-result-type"}),l("div",{class:"search-pro-result-content"},[e.header?l("div",{class:"content-header"},e.header):null,l("div",e.display.map(i=>q(i)).flat())]),l("button",{class:"search-pro-remove-icon",innerHTML:$,onClick:i=>{i.preventDefault(),i.stopPropagation(),H(t)}})]))])):null;return ne("keydown",e=>{if(o.isFocusing){if(C.value){if(e.key==="ArrowUp")V();else if(e.key==="ArrowDown")N();else if(e.key==="Enter"){const t=Q.value.contents[v.value];h(o.queries.join(" ")),f(t),s.push(F(t)),A()}}else if(E){if(e.key==="ArrowUp")Y();else if(e.key==="ArrowDown")G();else if(e.key==="Enter"){const{index:t}=r;r.isQuery?(a("updateQuery",m.value[t]),e.preventDefault()):(s.push(c.value[t].link),A())}}}}),M([p,v],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>l("div",{class:["search-pro-result-wrapper",{empty:o.queries.length?!C.value:!j.value}],id:"search-pro-results"},o.queries.length?d.value?l(ie,{hint:n.value.searching}):C.value?l("ul",{class:"search-pro-result-list"},g.value.map(({title:e,contents:t},i)=>{const w=p.value===i;return l("li",{class:["search-pro-result-list-item",{active:w}]},[l("div",{class:"search-pro-result-title"},e||n.value.defaultTitle),t.map((u,ee)=>{const O=w&&v.value===ee;return l(P,{to:F(u),class:["search-pro-result-item",{active:O,"aria-selected":O}],onClick:()=>{h(o.queries.join(" ")),f(u),A()}},()=>[u.type==="text"?null:l(u.type==="title"?ue:u.type==="heading"?ce:pe,{class:"search-pro-result-type"}),l("div",{class:"search-pro-result-content"},[u.type==="text"&&u.header?l("div",{class:"content-header"},u.header):null,l("div",Z(u))])])})])})):n.value.emptyResult:R?j.value?[W(),X()]:n.value.emptyHistory:n.value.emptyResult)}});export{Re as default};
