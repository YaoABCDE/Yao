import{a as L}from"./axios-CoTZsgdJ.js";import{m as i,L as k}from"./tools-B9TDRQ4Q.js";import{h as b,i as x,n as v,k as y,r as E,o as w,j as N,g as S,b as C}from"./app-CQLvvxAg.js";import{_ as T}from"./plugin-vue_export-helper-DlAUqK2U.js";import"./commonjsHelpers-Cpj98o6Y.js";const $=b({__name:"HeroBG",setup(_,{expose:c}){c();const a=()=>{var p,f,B,h,I;let r=window.location.pathname,e=i.get("BingImgIndex");const n=i.get("BingImgList");(!e||e<0)&&(e=0),e>n.length-1&&(e=n.length-1),i.set("BingImgIndex",e);const s=document.querySelector(".vp-blog-mask");e==0&&((p=document.getElementById("leftNav"))==null||p.classList.add("disabled")),e==n.length-1&&((f=document.getElementById("rightNav"))==null||f.classList.add("disabled")),e>0&&e<n.length-1&&((B=document.getElementById("leftNav"))==null||B.classList.remove("disabled"),(h=document.getElementById("rightNav"))==null||h.classList.remove("disabled"));let o=n[e];r.includes("/en")&&(o=o.EN);const l=document.getElementById("bingLink_text");l&&(l.innerHTML=o.Title),(I=document.getElementById("bingLink"))==null||I.setAttribute("href",o.CopyrightLink);const d=o.Path;s.style.background="",s.style.backgroundImage=`url(${d})`;const t=document.querySelector(".vp-footer-wrapper");t&&(t.style.backgroundImage=`url(${d})`)},g=r=>{var d;const e=document.querySelector(".vp-blog-mask");if(!e)return;const n=document.querySelector(".vp-blog-hero-title");if(n.addEventListener("click",()=>{window.location.href="//mo7.cc"}),!n)return;const s=i.get("BingImgList");if(s&&s.length<1)return;if(!document.getElementById("BingSwitchWrapper")){const t=document.createElement("div");t.id="BingSwitchWrapper",t.innerHTML=`
<a href="" target="_Blank" id="bingLink">
  <div class="bingLink_icon"><svg class="mapPin" height="16" width="16" viewBox="0 0 12 12" aria-hidden="true" role="presentation"><path d="M0 0h12v12h-12z" fill="none"></path><path d="M6.5 3a1.5 1.5 0 1 0 1.5 1.5 1.5 1.5 0 0 0-1.5-1.5zm0-3a4.5 4.5 0 0 0-4.5 4.5 5.607 5.607 0 0 0 .087.873c.453 2.892 2.951 5.579 3.706 6.334a1 1 0 0 0 1.414 0c.755-.755 3.253-3.442 3.706-6.334a5.549 5.549 0 0 0 .087-.873 4.5 4.5 0 0 0-4.5-4.5zm3.425 5.218c-.36 2.296-2.293 4.65-3.425 5.782-1.131-1.132-3.065-3.486-3.425-5.782a4.694 4.694 0 0 1-.075-.718 3.5 3.5 0 0 1 7 0 4.634 4.634 0 0 1-.075.718z"></path></svg></div>
  <div id="bingLink_text"></div>
</a>
<div id="leftNav"></div>
<div id="rightNav"></div>`,(d=e.parentElement)==null||d.insertBefore(t,e)}const o=document.getElementById("leftNav"),l=document.getElementById("rightNav");o&&l&&(a(),o.onclick=()=>{let t=i.get("BingImgIndex");t--,i.set("BingImgIndex",t),a()},l.onclick=()=>{let t=i.get("BingImgIndex");t++,i.set("BingImgIndex",t),a()})},m=()=>{L({method:"get",url:"//file.mo7.cc/api/public/url",params:{}}).then(r=>{const e=r.data.Data;if(!(e&&e.length<1)){for(const n of e)k(n.Path);i.set("BingImgList",e),g()}})};x(()=>{v(()=>{m()}),y().afterEach(e=>{v(()=>{setTimeout(()=>{g()},50)})})});const u={UpdateBingImg:a,InsertBtn:g,GetBingImgList:m};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}});function H(_,c,a,g,m,u){const r=E("ClientOnly");return w(),N(r,null,{default:S(()=>c[0]||(c[0]=[C("div",{class:"none"},"Bing壁纸",-1)])),_:1})}const O=T($,[["render",H],["__file","HeroBG.vue"]]);export{O as default};
