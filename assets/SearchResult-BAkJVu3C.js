import{u as $,h as te,k as le,l as I,m as oe,P as ae,t as se,p as re,q as Q,v as k,x as ne,w as U,y as l,z as ie,R as j,A as ue,B as ce,C as pe,D as me,E as ve,F as he,i as de,G as ge,H as ye,I as _e,J as Ee,K as O,L as P,M as be,N as B,O as fe}from"./app-U2UJoe7y.js";const Ae=["/","/Yao/","/about/","/about/me.html","/about/website.html","/about/guestbook.html","/developer/","/en/","/en/intro.html","/favorite/","/leetcode/","/posts/catalog.html","/posts/book_list.html","/posts/ot-doc_ready.html","/posts/","/tips/","/tips/xiaojiqiao.html","/tools/","/tools/uTools.html","/tutorial/proxy_wall_ready.html","/tutorial/wsl_ready.html","/tutorial/wsl_proxy.html","/tutorial/ssh_jump.html","/tutorial/","/Yao/Yaoa_zyk/","/Yao/myblog/","/Yao/myblog/website.html","/Yao/myblog/me.html","/developer/basic/computer_and_os.html","/developer/basic/open_source.html","/developer/basic/dev_env_ready.html","/developer/basic/coding_market.html","/developer/basic/file_and_path.html","/developer/basic/file_utf8.html","/developer/basic/cmd_shell.html","/developer/basic/apt_homebrew.html","/developer/basic/git_github.html","/developer/basic/vscode.html","/developer/basic/search_engine.html","/developer/basic/proxy_to_net.html","/developer/basic/","/developer/front_end_web/nodejs_ready.html","/developer/front_end_web/fnm_ready.html","/developer/front_end_web/web_develop_ready.html","/developer/front_end_web/","/developer/front_end_web/es6_modules.html","/developer/front_end_web/npm.html","/developer/front_end_web/pm2.html","/developer/front_end_web/url_parse.html","/developer/golang/golang_install.html","/developer/golang/go_mongo.html","/developer/golang/","/developer/golang/shell-format.html","/developer/golang/vscode_golang.html","/developer/golang/golang_viewpoint.html","/developer/golang/golang_shell.html","/developer/golang/golang_command.html","/developer/golang/golang_lib.html","/developer/golang/golang_book.html","/developer/linux/","/developer/linux/nginx_ready.html","/developer/linux/wsl%E5%AE%89%E8%A3%85%E6%A1%8C%E9%9D%A2.html","/en/demo/","/en/demo/disable.html","/en/demo/encrypt.html","/en/demo/page.html","/en/posts/cherry.html","/en/posts/dragonfruit.html","/en/posts/strawberry.html","/en/posts/tomato.html","/favorite/essays/","/favorite/essays/elonmusk_saying.html","/favorite/essays/not_internet_developer.html","/favorite/links/","/favorite/links/document.html","/favorite/links/friend.html","/favorite/links/tools.html","/favorite/movies/","/favorite/movies/ForrestGump.html","/favorite/music/","/favorite/music/music163_favorite.html","/favorite/photos/bing_img_api.html","/favorite/photos/","/leetcode/threeSum.html","/leetcode/twoSum.html","/leetcode/groupAnagrams.html","/leetcode/trap.html","/leetcode/longestConsecutive.html","/leetcode/maxArea.html","/leetcode/moveZeroes.html","/tools/git/git_ready.html","/tools/git/git_proxy.html","/tools/git/git_command.html","/tools/git/git_client.html","/tools/git/git_flow.html","/tools/git/","/tools/vscode/vscode_ready.html","/tools/vscode/vscode_common_plug.html","/tools/vscode/vscode_web_front_vue.html","/tools/vscode/vscode_golang.html","/tools/vscode/vscode_remote.html","/tools/vscode/vscode_Draw.html","/tools/vscode/vscode_nginx.html","/tools/vscode/","/tutorial/vuepress-hope/step_ready.html","/tutorial/vuepress-hope/img-preview.html","/tutorial/vuepress-hope/step_config.html","/tutorial/vuepress-hope/step_components.html","/tutorial/vuepress-hope/step_client.html","/tutorial/vuepress-hope/step_md_components.html","/tutorial/vuepress-hope/klipse.html","/tutorial/vuepress-hope/step_talk.html","/tutorial/vuepress-hope/step_icon_nav.html","/tutorial/vuepress-hope/step_deploy.html","/tutorial/vuepress-hope/","/Yao/Yaoa_zyk/movies/","/Yao/Yaoa_zyk/ForrestGump.html","/Yao/Yaoa_zyk/music/qq_music.html","/Yao/Yaoa_zyk/music/","/Yao/Yaoa_zyk/music/music163_favorite.html","/Yao/Yaoa_zyk/music/kugou_music.html","/developer/golang/go-zero/","/developer/linux/debian/","/developer/linux/debian/ready.html","/developer/linux/debian/install_mongo.html","/developer/linux/settings/","/developer/linux/settings/curl_cert.html","/en/posts/apple/1.html","/en/posts/apple/2.html","/en/posts/apple/3.html","/en/posts/apple/4.html","/en/posts/banana/1.html","/en/posts/banana/2.html","/en/posts/banana/3.html","/en/posts/banana/4.html","/404.html","/en/posts/","/en/posts/apple/","/en/posts/banana/","/category/","/category/developer/","/category/leetcode/","/category/%E5%8D%9A%E6%96%87/","/category/%E6%95%99%E7%A8%8B/","/category/%E6%8A%80%E5%B7%A7/","/category/%E5%B7%A5%E5%85%B7/","/category/%E5%9F%BA%E7%A1%80/","/category/%E5%89%8D%E7%AB%AF/","/category/golang/","/category/linux/","/category/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E6%95%99%E7%A8%8B/","/category/go/","/en/category/","/en/category/guide/","/en/category/cherry/","/en/category/dragon-fruit/","/en/category/fruit/","/en/category/strawberry/","/en/category/vegetable/","/en/category/apple/","/en/category/banana/","/tag/","/tag/%E7%9B%AE%E5%BD%95/","/tag/%E4%B9%A6%E5%8D%95/","/tag/ottertrade/","/tag/%E6%BC%94%E7%A4%BA/","/tag/utools/","/tag/%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/","/tag/%E4%BB%A3%E7%90%86/","/tag/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/","/tag/%E6%8A%80%E5%B7%A7/","/tag/%E6%95%99%E7%A8%8B/","/tag/%E5%B7%A5%E5%85%B7/","/tag/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/","/tag/%E5%BA%93/","/tag/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/","/tag/nginx/","/tag/leetcode/","/tag/git/","/tag/vscode/","/tag/go-zero/","/tag/debian/","/tag/%E6%95%B0%E6%8D%AE%E5%BA%93/","/tag/mongo/","/tag/setting/","/en/tag/","/en/tag/disable/","/en/tag/encryption/","/en/tag/page-config/","/en/tag/guide/","/en/tag/red/","/en/tag/small/","/en/tag/round/","/en/tag/big/","/en/tag/yellow/","/en/tag/curly/","/en/tag/long/","/article/","/en/article/","/star/","/en/star/","/timeline/","/en/timeline/"],we="SEARCH_PRO_QUERY_HISTORY",y=$(we,[]),ke=()=>{const{queryHistoryCount:o}=B,a=o>0;return{enabled:a,queryHistory:y,addQueryHistory:s=>{a&&(y.value=Array.from(new Set([s,...y.value.slice(0,o-1)])))},removeQueryHistory:s=>{y.value=[...y.value.slice(0,s),...y.value.slice(s+1)]}}},S=o=>Ae[o.id]+("anchor"in o?`#${o.anchor}`:""),Be="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:T}=B,_=$(Be,[]),xe=()=>{const o=T>0;return{enabled:o,resultHistory:_,addResultHistory:a=>{if(o){const s={link:S(a),display:a.display};"header"in a&&(s.header=a.header),_.value=[s,..._.value.slice(0,T-1)]}},removeResultHistory:a=>{_.value=[..._.value.slice(0,a),..._.value.slice(a+1)]}}},De=o=>{const a=me(),s=I(),x=ve(),n=Q(0),f=k(()=>n.value>0),h=he([]);return de(()=>{const{search:d,terminate:D}=ge(),E=be(c=>{const b=c.join(" "),{searchFilter:H=v=>v,splitWord:R,suggestionsFilter:F,...g}=a.value;b?(n.value+=1,d(c.join(" "),s.value,g).then(v=>H(v,b,s.value,x.value)).then(v=>{n.value-=1,h.value=v}).catch(v=>{console.warn(v),n.value-=1,n.value||(h.value=[])})):h.value=[]},B.searchDelay-B.suggestDelay);U([o,s],([c])=>E(c),{immediate:!0}),ye(()=>{D()})}),{isSearching:f,results:h}};var Re=te({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(o,{emit:a}){const s=le(),x=I(),n=oe(ae),{enabled:f,addQueryHistory:h,queryHistory:d,removeQueryHistory:D}=ke(),{enabled:E,resultHistory:c,addResultHistory:b,removeResultHistory:H}=xe(),R=f||E,F=se(o,"queries"),{results:g,isSearching:v}=De(F),r=re({isQuery:!0,index:0}),p=Q(0),m=Q(0),L=k(()=>R&&(d.value.length>0||c.value.length>0)),Y=k(()=>g.value.length>0),q=k(()=>g.value[p.value]||null),G=()=>{const{isQuery:e,index:t}=r;t===0?(r.isQuery=!e,r.index=e?c.value.length-1:d.value.length-1):r.index=t-1},M=()=>{const{isQuery:e,index:t}=r;t===(e?d.value.length-1:c.value.length-1)?(r.isQuery=!e,r.index=0):r.index=t+1},J=()=>{p.value=p.value>0?p.value-1:g.value.length-1,m.value=q.value.contents.length-1},K=()=>{p.value=p.value<g.value.length-1?p.value+1:0,m.value=0},N=()=>{m.value<q.value.contents.length-1?m.value+=1:K()},V=()=>{m.value>0?m.value-=1:J()},C=e=>e.map(t=>fe(t)?t:l(t[0],t[1])),Z=e=>{if(e.type==="customField"){const t=_e[e.index]||"$content",[i,w=""]=Ee(t)?t[x.value].split("$content"):t.split("$content");return e.display.map(u=>l("div",C([i,...u,w])))}return e.display.map(t=>l("div",C(t)))},A=()=>{p.value=0,m.value=0,a("updateQuery",""),a("close")},W=()=>f?l("ul",{class:"search-pro-result-list"},l("li",{class:"search-pro-result-list-item"},[l("div",{class:"search-pro-result-title"},n.value.queryHistory),d.value.map((e,t)=>l("div",{class:["search-pro-result-item",{active:r.isQuery&&r.index===t}],onClick:()=>{a("updateQuery",e)}},[l(O,{class:"search-pro-result-type"}),l("div",{class:"search-pro-result-content"},e),l("button",{class:"search-pro-remove-icon",innerHTML:P,onClick:i=>{i.preventDefault(),i.stopPropagation(),D(t)}})]))])):null,X=()=>E?l("ul",{class:"search-pro-result-list"},l("li",{class:"search-pro-result-list-item"},[l("div",{class:"search-pro-result-title"},n.value.resultHistory),c.value.map((e,t)=>l(j,{to:e.link,class:["search-pro-result-item",{active:!r.isQuery&&r.index===t}],onClick:()=>{A()}},()=>[l(O,{class:"search-pro-result-type"}),l("div",{class:"search-pro-result-content"},[e.header?l("div",{class:"content-header"},e.header):null,l("div",e.display.map(i=>C(i)).flat())]),l("button",{class:"search-pro-remove-icon",innerHTML:P,onClick:i=>{i.preventDefault(),i.stopPropagation(),H(t)}})]))])):null;return ne("keydown",e=>{if(o.isFocusing){if(Y.value){if(e.key==="ArrowUp")V();else if(e.key==="ArrowDown")N();else if(e.key==="Enter"){const t=q.value.contents[m.value];h(o.queries.join(" ")),b(t),s.push(S(t)),A()}}else if(E){if(e.key==="ArrowUp")G();else if(e.key==="ArrowDown")M();else if(e.key==="Enter"){const{index:t}=r;r.isQuery?(a("updateQuery",d.value[t]),e.preventDefault()):(s.push(c.value[t].link),A())}}}}),U([p,m],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>l("div",{class:["search-pro-result-wrapper",{empty:o.queries.length?!Y.value:!L.value}],id:"search-pro-results"},o.queries.length?v.value?l(ie,{hint:n.value.searching}):Y.value?l("ul",{class:"search-pro-result-list"},g.value.map(({title:e,contents:t},i)=>{const w=p.value===i;return l("li",{class:["search-pro-result-list-item",{active:w}]},[l("div",{class:"search-pro-result-title"},e||n.value.defaultTitle),t.map((u,ee)=>{const z=w&&m.value===ee;return l(j,{to:S(u),class:["search-pro-result-item",{active:z,"aria-selected":z}],onClick:()=>{h(o.queries.join(" ")),b(u),A()}},()=>[u.type==="text"?null:l(u.type==="title"?ue:u.type==="heading"?ce:pe,{class:"search-pro-result-type"}),l("div",{class:"search-pro-result-content"},[u.type==="text"&&u.header?l("div",{class:"content-header"},u.header):null,l("div",Z(u))])])})])})):n.value.emptyResult:R?L.value?[W(),X()]:n.value.emptyHistory:n.value.emptyResult)}});export{Re as default};
